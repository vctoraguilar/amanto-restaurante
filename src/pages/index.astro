---
import Layout from '../layouts/Layout.astro';
import TranslationScript from '../components/TranslationScript.astro';
---

<Layout title="Amanto - Ollantaytambo">
  <div class="bg-white overflow-hidden w-screen h-screen relative">
    <!-- Imagen de fondo - capa base -->
    <img
      id="background-image-1"
      class="absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-500 ease-in-out z-0"
      alt="Amanto Restaurant"
      src="/images/mesa.jpg"
    />
    <!-- Imagen de fondo - capa superior para crossfade -->
    <img
      id="background-image-2"
      class="absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-500 ease-in-out z-10 opacity-0"
      alt="Amanto Restaurant"
      src="/images/mesa.jpg"
    />

    <!-- Logo superior izquierdo -->
    <div
      class="absolute top-[3.5vh] left-[3.4vw] w-[60px] md:w-[9.8vw] h-auto z-50"
      role="img"
      aria-label="Amanto logo"
    >
      <!-- Logo para desktop -->
      <img 
        src="/images/logo.svg" 
        alt="Amanto" 
        class="hidden md:block w-full h-full object-contain"
      />
      <!-- Favicon para móvil -->
      <svg class="block md:hidden w-[50%] h-[50%]" viewBox="0 0 32 31.72" xmlns="http://www.w3.org/2000/svg">
        <path fill="#ffffff" d="M16,14.98C8,9.26,0,3.83,0,0v31.72h6.43c1.13-3.05,5.3-6.21,9.57-9.16,4.26,2.95,8.44,6.11,9.57,9.16h6.43V0c0,3.83-8,9.26-16,14.98ZM6.43,22.31v-6.99c.94,1.08,2.46,2.28,4.24,3.56-1.5,1.15-2.94,2.29-4.24,3.43ZM21.33,18.88c1.78-1.27,3.3-2.47,4.24-3.56v6.99c-1.3-1.14-2.73-2.28-4.24-3.43Z"/>
      </svg>
    </div>
      
    <!-- Selector de idioma superior derecho -->
    <div
      class="absolute top-[5.5vh] right-[5vw] md:right-[8.5vw] font-bold text-xs md:text-base tracking-[2px] md:tracking-[4.80px] leading-normal whitespace-nowrap z-50"
      role="navigation"
      aria-label="Language selector"
    >
      <button
        class="text-white tracking-[0.77px] hover:text-[#f49f13] transition-colors"
        data-lang="en"
        aria-label="Switch to EN"
      >
        EN
      </button>
      <span class="text-white tracking-[0.77px]"> | </span>
      <button
        class="text-[#f49f13] tracking-[0.77px] hover:text-white transition-colors"
        data-lang="es"
        aria-label="Switch to ES"
        aria-current="true"
      >
        ES
      </button>
          </div>

    <!-- Navegación inferior -->
    <nav
      id="bottom-nav"
      class="absolute bottom-[10vh] md:bottom-[6vh] left-0 right-0 flex md:flex-row flex-col md:justify-center items-center md:gap-[8.5vw] gap-[4vh] z-50"
      role="navigation"
      aria-label="Main navigation"
    >
      <a
        href="/nosotros"
        data-bg="/images/nosotros.jpg"
        class="nav-link text-white md:text-2xl text-base md:tracking-[14.40px] tracking-[6px] leading-normal font-light whitespace-nowrap relative inline-block pb-1"
        style="font-family: 'Figtree', -apple-system, BlinkMacSystemFont, sans-serif; font-weight: 300;"
      >
        NOSOTROS
      </a>
      <a
        href="/carta"
        data-bg="/images/plato4.jpg"
        class="nav-link text-white md:text-2xl text-base md:tracking-[14.40px] tracking-[6px] leading-normal font-light whitespace-nowrap relative inline-block pb-1"
        style="font-family: 'Figtree', -apple-system, BlinkMacSystemFont, sans-serif; font-weight: 300;"
      >
        CARTA
      </a>
      <a
        href="/reserva"
        data-bg="/images/interior1.jpg"
        class="nav-link text-white md:text-2xl text-base md:tracking-[14.40px] tracking-[6px] leading-normal font-light whitespace-nowrap relative inline-block pb-1"
        style="font-family: 'Figtree', -apple-system, BlinkMacSystemFont, sans-serif; font-weight: 300;"
      >
        RESERVA
      </a>
    </nav>
          </div>
          
  <style>
    /* Barra inferior con degradado para los enlaces de navegación */
    .nav-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, #f59e0b 0%, #d97706 50%, #b45309 100%);
      transition: width 0.5s ease-in-out;
    }

    .nav-link:hover::after {
      width: 100px;
    }

    /* Asegurar que no hay scroll */
    body {
      overflow: hidden;
    }
  </style>

  <TranslationScript />
  
  <script>
    // Script para cambio de idioma
    const langButtons = document.querySelectorAll('[data-lang]');
    
    langButtons.forEach(button => {
      button.addEventListener('click', () => {
        const lang = button.getAttribute('data-lang') as 'es' | 'en';
        
        // Actualizar estado visual
        langButtons.forEach(btn => {
          if (btn.getAttribute('data-lang') === lang) {
            btn.classList.remove('text-white');
            btn.classList.add('text-[#f49f13]');
            btn.setAttribute('aria-current', 'true');
          } else {
            btn.classList.remove('text-[#f49f13]');
            btn.classList.add('text-white');
            btn.removeAttribute('aria-current');
          }
        });
        
        // Guardar idioma
        localStorage.setItem('language', lang);
        document.documentElement.setAttribute('data-language', lang);
        
        // Recargar para aplicar traducciones
        window.location.reload();
      });
    });

    // Cargar idioma guardado al inicio
    const savedLang = localStorage.getItem('language') as 'es' | 'en' | null;
    if (savedLang) {
      document.documentElement.setAttribute('data-language', savedLang);
      
      langButtons.forEach(btn => {
        if (btn.getAttribute('data-lang') === savedLang) {
          btn.classList.remove('text-white');
          btn.classList.add('text-[#f49f13]');
          btn.setAttribute('aria-current', 'true');
        } else {
          btn.classList.remove('text-[#f49f13]');
          btn.classList.add('text-white');
          btn.removeAttribute('aria-current');
        }
      });
    }

    // Script para cambio de imagen de fondo al hacer hover con efecto crossfade
    const navLinks = document.querySelectorAll('.nav-link');
    const bgImage2 = document.getElementById('background-image-2') as HTMLImageElement;

    navLinks.forEach(link => {
      link.addEventListener('mouseenter', () => {
        const newBg = link.getAttribute('data-bg');
        if (newBg) {
          // Cargar nueva imagen en la capa superior y hacer fade in
          bgImage2.src = newBg;
          bgImage2.style.opacity = '1';
        }
      });

      link.addEventListener('mouseleave', () => {
        // Hacer fade out de la capa superior para revelar la imagen original de la capa base
        bgImage2.style.opacity = '0';
      });
    });
  </script>
</Layout>

